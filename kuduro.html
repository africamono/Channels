<html>
<head>
  <base href=".">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Africa Mono</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
    }

    #fullscreen-container {
      position: relative;
      width: 100%;
      height: 100vh;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #meuVideo {
      width: 100%;
      height: 100%;
      object-fit: contain;
      max-width: 100%;
      max-height: 100vh;
    }

    #logo-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: auto;
      height: auto;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    #logo-overlay.visible {
      opacity: 1;
    }

    #progress-circle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      border: 3px solid #fff;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    #loading-message, #satellite-message {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 18px;
      text-align: center;
    }

    #satellite-message {
      opacity: 0;
      transition: opacity 0.3s;
    }

    #satellite-message.show {
      opacity: 1;
    }

    #button-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
    }

    #playButton {
      font-size: 48px;
      color: white;
      opacity: 0;
      transition: opacity 0.3s;
    }

    #playButton.visible {
      opacity: 1;
    }

    .hidden {
      display: none;
    }

    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

<div id="fullscreen-container">   
  <video id="meuVideo" playsinline preload="auto">
    <source src type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <img id="logo-overlay" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj4QEnGwCCVGf828gnwDZ4MuxfllJuJjffr9g6UuhvK1l3hKyIoRIkWKwTei201g6VJfa3deQ37FeFe5ygxwiXb2YICOqHSygcbA7gmPJKDtjzWV-zYVcnHB5P8cir6SfZ5C60vCJGbAxosdlGKtRWukvmIwHYjEgRsf3XV8_mhYTOrxH8imCmn_gneUM7V/s1600/kUDURO.png" alt="Logo">
  <div id="progress-circle" class="hidden"></div>
  <div id="loading-message" class="hidden">Checking the connection...</div>
  <div id="satellite-message">Adjusting the signal on the satellite...</div>
  <div id="button-container">
    <i id="playButton" class="fas fa-play"></i>
  </div>
</div>

<script>
const streamUrl = 'https://edge1-us-newyork.picarto.tv/stream/golive%2bafricamono.mp4';
const videoSources = ['https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4', 'https://seed128.bitchute.com/OkD3fEQ7n2eI/Android4.mp4'];
const androidSources = ['https://seed128.bitchute.com/OkD3fEQ7n2eI/Android4.mp4'];
const playlistStartTime = Date.UTC(2024, 11, 1, 0, 0, 0) / 1000;
const videoPlayer = document.getElementById("meuVideo");
const playButton = document.getElementById("playButton");
const progressCircle = document.getElementById("progress-circle");
const loadingMessage = document.getElementById("loading-message");
const logoOverlay = document.getElementById('logo-overlay');
let videoDurations = [];
let playButtonTimeout;
let isVideoPlaying = false;

function toggleFullScreen() {
  const container = document.getElementById('fullscreen-container');
  if (!document.fullscreenElement && !document.webkitFullscreenElement) {
    if (container.requestFullscreen) {
      container.requestFullscreen().catch(err => {
        console.log(`Error attempting to enable fullscreen: ${err.message}`);
      });
    } else if (container.webkitRequestFullscreen) {
      container.webkitRequestFullscreen();
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else {
      document.webkitExitFullscreen();
    }
  }
}

document.getElementById('fullscreen-container').addEventListener('click', toggleFullScreen);

function showSatelliteMessage() {
  hideLoading();
  playButton.classList.remove('visible');
  const message = document.getElementById('satellite-message');
  message.classList.add('show');
  setTimeout(hideSatelliteMessage, 3000);
}

function hideSatelliteMessage() {
  const message = document.getElementById('satellite-message');
  message.classList.remove('show');
}

function showLoading() {
  if (!isVideoPlaying) {
    progressCircle.classList.remove("hidden");
    loadingMessage.classList.remove("hidden");
    playButton.classList.remove('visible');
    hideSatelliteMessage();
  }
}

function hideLoading() {
  progressCircle.classList.add("hidden");
  loadingMessage.classList.add("hidden");
}

function showPlayButton() {
  if (!isVideoPlaying) {
    hideLoading();
    hideSatelliteMessage();
    playButton.classList.add('visible');
    playButtonTimeout = setTimeout(() => {
      playButton.classList.remove('visible');
    }, 5000);
  }
}

async function getCurrentUTCTime() {
  try {
    const response = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
    if (response.ok) {
      const data = await response.json();
      return data.unixtime;
    }
  } catch (error) {
    console.warn("Failed to fetch UTC time, using local time as fallback.");
  }
  return Math.floor(Date.now() / 1000);
}

function calculateVideoPosition(elapsedTime) {
  const totalDuration = videoDurations.reduce((a, b) => a + b, 0);
  const elapsedInPlaylist = elapsedTime % totalDuration;
  let accumulatedTime = 0;
  for (let i = 0; i < videoSources.length; i++) {
    accumulatedTime += videoDurations[i];
    if (elapsedInPlaylist < accumulatedTime) {
      const startTime = videoDurations[i] - (accumulatedTime - elapsedInPlaylist);
      return {
        index: i,
        startTime
      };
    }
  }
  return {
    index: 0,
    startTime: 0
  };
}

async function syncPlayback() {
  const currentTime = await getCurrentUTCTime();
  const elapsedTime = currentTime - playlistStartTime;

  const videoIndex = calculateVideoPosition(elapsedTime).index;

  const isOldAndroid = /Android [1-4]/.test(navigator.userAgent);
  const sources = isOldAndroid ? androidSources : videoSources;
  const videoSource = sources[videoIndex];

  videoPlayer.innerHTML = `<source src="${videoSource}" type="video/mp4">`;
  videoPlayer.load();
  videoPlayer.play().then(() => {
    isVideoPlaying = true;
    showPlayButton();
  }).catch(console.error);
}

window.addEventListener("load", async () => {
  showLoading();
  await syncPlayback();
});

playButton.addEventListener("click", function (e) {
  e.stopPropagation();
  if (videoPlayer.paused) {
    videoPlayer.play().then(() => {
      isVideoPlaying = true;
      playButton.classList.remove('visible');
    }).catch(error => {
      console.error("Error starting video:", error);
    });
  }
});
</script>

</body>
</html>

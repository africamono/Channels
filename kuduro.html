<html><head><base href="." /><meta charset="utf-8">
<title>Africa Mono</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    background: #000;
  }

  #fullscreen-container {
    position: relative;
    width: 100%;
    height: 100vh;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #meuVideo {
    width: 100%;
    height: 100%;
    object-fit: contain;
    max-width: 100%;
    max-height: 100vh;
  }

  #logo-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
  }

  #logo-overlay.visible {
    opacity: 1;
  }

  #progress-circle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50px;
    height: 50px;
    border: 3px solid #fff;
    border-top: 3px solid transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  #loading-message, #satellite-message {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 18px;
    text-align: center;
  }

  #satellite-message {
    opacity: 0;
    transition: opacity 0.3s;
  }

  #satellite-message.show {
    opacity: 1;
  }

  #button-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
  }

  #playButton {
    font-size: 48px;
    color: white;
    opacity: 0;
    transition: opacity 0.3s;
  }

  #playButton.visible {
    opacity: 1;
  }

  .hidden {
    display: none;
  }

  @keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
  }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

<div id="fullscreen-container">   
  <video id="meuVideo" playsinline preload="auto"></video>
  <img id="logo-overlay" 
       src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj4QEnGwCCVGf828gnwDZ4MuxfllJuJjffr9g6UuhvK1l3hKyIoRIkWKwTei201g6VJfa3deQ37FeFe5ygxwiXb2YICOqHSygcbA7gmPJKDtjzWV-zYVcnHB5P8cir6SfZ5C60vCJGbAxosdlGKtRWukvmIwHYjEgRsf3XV8_mhYTOrxH8imCmn_gneUM7V/s1600/kUDURO.png" 
       alt="Logo">
  <div id="progress-circle" class="hidden"></div>
  <div id="loading-message" class="hidden">Checking the connection...</div>
  <div id="satellite-message">Adjusting the signal on the satellite...</div>
  <div id="button-container">
    <i id="playButton" class="fas fa-play"></i>
  </div>
</div>

<script>
const streamUrl = 'https://edge1-us-newyork.picarto.tv/stream/golive%2bafricamono.mp4';
const videoSources = [
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4',
  'https://seed128.bitchute.com/OkD3fEQ7n2eI/CUQimJR7WqwP.mp4'
];

const playlistStartTime = Date.UTC(2024, 11, 1, 0, 0, 0) / 1000;
const videoPlayer = document.getElementById("meuVideo");
const playButton = document.getElementById("playButton");
const progressCircle = document.getElementById("progress-circle");
const loadingMessage = document.getElementById("loading-message");
const logoOverlay = document.getElementById('logo-overlay');
let videoDurations = [];
let playButtonTimeout;
let isVideoPlaying = false;

function toggleFullScreen() {
    const container = document.getElementById('fullscreen-container');
    if (!document.fullscreenElement && !document.webkitFullscreenElement) {
        if (container.requestFullscreen) {
            container.requestFullscreen().catch(err => {
                console.log(`Error attempting to enable fullscreen: ${err.message}`);
            });
        } else if (container.webkitRequestFullscreen) {
            container.webkitRequestFullscreen();
        }
    } else {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else {
            document.webkitExitFullscreen();
        }
    }
}

document.getElementById('fullscreen-container').addEventListener('click', toggleFullScreen);

function showSatelliteMessage() {
    hideLoading();
    playButton.classList.remove('visible');
    const message = document.getElementById('satellite-message');
    message.classList.add('show');
    setTimeout(hideSatelliteMessage, 3000);
}

function hideSatelliteMessage() {
    const message = document.getElementById('satellite-message');
    message.classList.remove('show');
}

function showLoading() {
    if (!isVideoPlaying) {
        progressCircle.classList.remove("hidden");
        loadingMessage.classList.remove("hidden");
        playButton.classList.remove('visible');
        hideSatelliteMessage();
    }
}

function hideLoading() {
    progressCircle.classList.add("hidden");
    loadingMessage.classList.add("hidden");
}

function showPlayButton() {
    if (!isVideoPlaying) {
        hideLoading();
        hideSatelliteMessage();
        playButton.classList.add('visible');
        playButtonTimeout = setTimeout(() => {
            playButton.classList.remove('visible');
        }, 5000);
    }
}

async function getCurrentUTCTime() {
    try {
        const response = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
        if (response.ok) {
            const data = await response.json();
            return data.unixtime;
        }
    } catch (error) {
        console.warn("Failed to fetch UTC time, using local time as fallback.");
    }
    return Math.floor(Date.now() / 1000);
}

function calculateVideoPosition(elapsedTime) {
    const totalDuration = videoDurations.reduce((a, b) => a + b, 0);
    const elapsedInPlaylist = elapsedTime % totalDuration;
    let accumulatedTime = 0;

    for (let i = 0; i < videoSources.length; i++) {
        accumulatedTime += videoDurations[i];
        if (elapsedInPlaylist < accumulatedTime) {
            const startTime = videoDurations[i] - (accumulatedTime - elapsedInPlaylist);
            return { index: i, startTime };
        }
    }
    return { index: 0, startTime: 0 };
}

async function syncPlayback() {
    const currentUTC = await getCurrentUTCTime();
    const elapsedTime = currentUTC - playlistStartTime;
    if (elapsedTime < 0) {
        console.error("Playlist has not started yet.");
        return;
    }

    const { index, startTime } = calculateVideoPosition(elapsedTime);

    if (videoPlayer.src !== videoSources[index]) {
        showSatelliteMessage();
        videoPlayer.src = videoSources[index];
        playButton.classList.remove('visible');
        clearTimeout(playButtonTimeout);
        videoPlayer.load();
    }

    videoPlayer.addEventListener("loadedmetadata", function onMetadataLoaded() {
        videoPlayer.currentTime = startTime;
        videoPlayer.play().catch(console.error);
        videoPlayer.removeEventListener("loadedmetadata", onMetadataLoaded);
    });
}

async function preloadDurations() {
    await Promise.all(videoSources.map(async (source, i) => {
        const tempVideo = document.createElement("video");
        tempVideo.src = source;

        await new Promise(resolve => {
            tempVideo.addEventListener("loadedmetadata", () => {
                videoDurations[i] = tempVideo.duration;
                resolve();
            });
        });
    }));
    syncPlayback();
}

async function checkStreamAvailability() {
    try {
        const response = await fetch(streamUrl, { method: 'HEAD' });
        return response.ok;
    } catch {
        return false;
    }
}

async function syncStreamOrPlaylist() {
    if (!isVideoPlaying) {
        showLoading();
        playButton.classList.remove('visible');
        hideSatelliteMessage();
    }
    const isStreamAvailable = await checkStreamAvailability();
    if (isStreamAvailable) {
        if (videoPlayer.src !== streamUrl) {
            hideLoading();
            showSatelliteMessage();
            setTimeout(hideSatelliteMessage, 3000);
            videoPlayer.src = streamUrl;
            videoPlayer.load();
            videoPlayer.play().catch(console.error);
        }
    } else {
        syncPlayback();
    }
    hideLoading();
}

videoPlayer.addEventListener("playing", () => {
    isVideoPlaying = true;
    hideLoading();
    playButton.classList.remove('visible');
    logoOverlay.classList.add('visible');
    setTimeout(() => {
        hideSatelliteMessage();
    }, 500);
});

videoPlayer.addEventListener("pause", () => {
    isVideoPlaying = false;
    logoOverlay.classList.remove('visible');
});

videoPlayer.addEventListener("ended", () => {
    logoOverlay.classList.remove('visible');
});

videoPlayer.addEventListener("loadedmetadata", function() {
    if (!isVideoPlaying) {
        hideLoading();
        hideSatelliteMessage();
        showPlayButton();
    }
});

playButton.addEventListener("click", function(e) {
    e.stopPropagation();
    if (videoPlayer.paused) {
        showLoading();
        videoPlayer.play()
            .then(() => {
                isVideoPlaying = true;
                playButton.classList.remove('visible');
                clearTimeout(playButtonTimeout);
            })
            .catch(error => {
                console.error("Error starting video:", error);
                hideLoading();
            });
    }
});

videoPlayer.addEventListener("loadeddata", hideLoading);
videoPlayer.addEventListener("waiting", () => {
    if (!isVideoPlaying) showLoading();
});

window.addEventListener("load", async () => {
    showLoading();
    await preloadDurations();
    await syncStreamOrPlaylist();
    if (!isVideoPlaying) hideLoading();
});

setInterval(syncStreamOrPlaylist, 10000);

document.addEventListener('fullscreenchange', function() {
    const container = document.getElementById('fullscreen-container');
    if (document.fullscreenElement) {
        container.style.width = '100vw';
        container.style.height = '100vh';
        if (isVideoPlaying) {
            logoOverlay.classList.add('visible');
        }
    } else {
        container.style.width = '100%';
        container.style.height = '100vh';
        if (isVideoPlaying) {
            logoOverlay.classList.add('visible');
        }
    }
});

document.addEventListener('webkitfullscreenchange', function() {
    const container = document.getElementById('fullscreen-container');
    if (document.webkitFullscreenElement) {
        container.style.width = '100vw';
        container.style.height = '100vh';
        if (isVideoPlaying) {
            logoOverlay.classList.add('visible');
        }
    } else {
        container.style.width = '100%';
        container.style.height = '100vh';
        if (isVideoPlaying) {
            logoOverlay.classList.add('visible');
        }
    }
});
</script>

</body>
